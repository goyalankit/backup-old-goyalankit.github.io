
<!DOCTYPE HTML>
<html>
<head>
	<script data-cfasync="false" type="text/javascript" src="//use.typekit.net/axj3cfp.js"></script>
	<script data-cfasync="false" type="text/javascript">try{Typekit.load();}catch(e){}</script>
	<meta charset="utf-8">
	<title>elasticsearch basics - Analyzers  | /home/ankit</title>

<meta name="author" content="Ankit Goyal"> 

<meta name="description" content="Elasticsearch is a powerful open source search engine build over Apache
Lucene. You can do all kind of customized searches on huge amount of
data by &hellip;"> <meta name="keywords" content="">

	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="/atom.xml" rel="alternate" title="/home/ankit" type="application/atom+xml">
	<link rel="canonical" href="">
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css" media="screen" />
<script type="text/javascript" src="/fancybox/jquery.fancybox.pack.js"></script>

<script language="Javascript" type="text/javascript">
$(document).ready(
  function() {
    (function($) {
      $(".fancybox[data-content-id]").each(function() {
        this.href = $(this).data('content-id');
      });
      $(".fancybox").fancybox({
        beforeLoad: function() {
          var el, 
              id = $(this.element).data('title-id');

          if (id) {
            el = $('#' + id);

            if (el.length) {
              this.title = el.html();
            }
          }
          if ($(this).data('content')) {
            this.content = $(this).data('content');
          }
        },
        helpers: {
          title: {
            type: 'inside'
          }
        }
      });
    })(jQuery);
  }
);
</script>
	
</head>


<body>
	<header id="header" class="inner"><h1><a href="/">/home/ankit</a></h1>
<h4>developer. curious. learner.</h4>
<nav id="main-nav"><ul>
	<li><a href="/">Blog</a></li>
    <li><a href="/about">About</a></li>
	<li><a href="/labs">Labs</a></li>
	<li><a href="/archives">Archive</a></li>
</ul>
</nav>
<nav id="mobile-nav">
	<div class="alignleft menu">
		<a class="button">Menu</a>
		<div class="container"><ul>
	<li><a href="/">Blog</a></li>
    <li><a href="/about">About</a></li>
	<li><a href="/labs">Labs</a></li>
	<li><a href="/archives">Archive</a></li>
</ul>
</div>
	</div>
	<div class="alignright search">
		<a class="button"></a>
		<div class="container">
			<form action="http://google.com/search" method="get">
				<input type="text" name="q" results="0">
				<input type="hidden" name="q" value="site:goyalankit.github.io">
			</form>
		</div>
	</div>
</nav>


<nav id="sub-nav">
	<div class="social">
		<a title="Twitter" href="http://twitter.com/_goyalankit" class="twitter">Twitter</a>
		<a title="GitHub" href="https://github.com/goyalankit" class="github">GitHub</a>
		<a title="Linkedin" href="http://www.linkedin.com/in/goyalankit3" class="linkedin">Linkedin</a>
		<a title="RSS" href="/atom.xml" class="rss">RSS</a>
	</div>
</nav>







</header>

	<div id="content" class="inner"><article class="post">
	<h2 class="title">elasticsearch basics - Analyzers</h2>
	<div class="entry-content"><p>Elasticsearch is a powerful open source search engine build over Apache
Lucene. You can do all kind of customized searches on huge amount of
data by creating customized indexes. This post gives an overview of
Analysis module of elasticsearch.</p>

<p>Analyzers basically helps you in analyzing your data.<code>:o</code> You need to analyze data while creating indexes and while searching. You could analyze your analyzers using <a href="http://www.elasticsearch.org/guide/reference/api/admin-indices-analyze.html">Analyze Api</a> provided by elasticsearch.</p>

<p>Creating indexes mainly involves three steps:</p>

<ul>
<li><strong>Pre-processing of raw text</strong> using <a href="http://www.elasticsearch.org/guide/reference/index-modules/analysis/mapping-charfilter/">char filters </a>. This may be used to strip html tags, or you may define your custom mapping.  (<em>Couldn&rsquo;t find a way to test this using analyse api. Please put it in comments if you know some way to test these through Analyze Api</em>)</li>
</ul>


<p>Example: You could use a <strong>char-filter</strong> of type <a href="http://www.elasticsearch.org/guide/reference/index-modules/analysis/htmlstrip-charfilter/"><code>html_strip</code></a> to strip out html tags.</p>

<p>A text like this:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;p&gt;</span> Learn Something New Today! which is <span class="nt">&lt;b&gt;</span>always<span class="nt">&lt;/b&gt;</span> fun <span class="nt">&lt;/p&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>would get converted to:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'>Learn Something New Today! which is always fun
</span></code></pre></td></tr></table></div></figure>


<!-- more -->


<ul>
<li><strong>Tokenization of the pre-processed text</strong> using tokenizers. Tokenizers breaks the pre-processed text into tokens. There are different kind of tokenizers available and each of them breaks the text into words differently. By default elasticsearch uses <a href="http://www.elasticsearch.org/guide/reference/index-modules/analysis/standard-tokenizer/">standard tokenizer</a>.</li>
</ul>


<p>standard tokenizer normalizes the data. Note that it removes <code>!</code> from <code>Today!</code></p>

<p>A pre-processed text like this:</p>

<p><code>Learn Something New Today! which is always fun</code></p>

<p>gets broken as</p>

<p><code>Learn</code> <code>Something</code> <code>New</code> <code>Today</code> <code>which</code> <code>is</code> <code>always</code> <code>fun</code></p>

<p>You could check for yourself using Analyze Api mentioned above.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>curl -XGET <span class="s1">&#39;localhost:9200/_analyze?tokenizer=standard&#39;</span> -d <span class="s1">&#39;Learn Something New Today! which is always fun&#39;</span>
</span></code></pre></td></tr></table></div></figure>


<p><a class="link1" id="show-hide-link-1">show/hide the output</a></p>

<div class="foldable" id="show-hide-block-1">
<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="s2">&quot;tokens&quot;</span><span class="o">:</span> <span class="p">[</span>
</span><span class='line'>        <span class="p">{</span>
</span><span class='line'>            <span class="s2">&quot;end_offset&quot;</span><span class="o">:</span> <span class="mi">5</span><span class="p">,</span>
</span><span class='line'>            <span class="s2">&quot;position&quot;</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
</span><span class='line'>            <span class="s2">&quot;start_offset&quot;</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
</span><span class='line'>            <span class="s2">&quot;token&quot;</span><span class="o">:</span> <span class="s2">&quot;Learn&quot;</span><span class="p">,</span>
</span><span class='line'>            <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;&lt;ALPHANUM&gt;&quot;</span>
</span><span class='line'>        <span class="p">},</span>
</span><span class='line'>        <span class="p">{</span>
</span><span class='line'>            <span class="s2">&quot;end_offset&quot;</span><span class="o">:</span> <span class="mi">15</span><span class="p">,</span>
</span><span class='line'>            <span class="s2">&quot;position&quot;</span><span class="o">:</span> <span class="mi">2</span><span class="p">,</span>
</span><span class='line'>            <span class="s2">&quot;start_offset&quot;</span><span class="o">:</span> <span class="mi">6</span><span class="p">,</span>
</span><span class='line'>            <span class="s2">&quot;token&quot;</span><span class="o">:</span> <span class="s2">&quot;Something&quot;</span><span class="p">,</span>
</span><span class='line'>            <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;&lt;ALPHANUM&gt;&quot;</span>
</span><span class='line'>        <span class="p">},</span>
</span><span class='line'>        <span class="p">{</span>
</span><span class='line'>            <span class="s2">&quot;end_offset&quot;</span><span class="o">:</span> <span class="mi">19</span><span class="p">,</span>
</span><span class='line'>            <span class="s2">&quot;position&quot;</span><span class="o">:</span> <span class="mi">3</span><span class="p">,</span>
</span><span class='line'>            <span class="s2">&quot;start_offset&quot;</span><span class="o">:</span> <span class="mi">16</span><span class="p">,</span>
</span><span class='line'>            <span class="s2">&quot;token&quot;</span><span class="o">:</span> <span class="s2">&quot;New&quot;</span><span class="p">,</span>
</span><span class='line'>            <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;&lt;ALPHANUM&gt;&quot;</span>
</span><span class='line'>        <span class="p">},</span>
</span><span class='line'>        <span class="p">{</span>
</span><span class='line'>            <span class="s2">&quot;end_offset&quot;</span><span class="o">:</span> <span class="mi">25</span><span class="p">,</span>
</span><span class='line'>            <span class="s2">&quot;position&quot;</span><span class="o">:</span> <span class="mi">4</span><span class="p">,</span>
</span><span class='line'>            <span class="s2">&quot;start_offset&quot;</span><span class="o">:</span> <span class="mi">20</span><span class="p">,</span>
</span><span class='line'>            <span class="s2">&quot;token&quot;</span><span class="o">:</span> <span class="s2">&quot;Today&quot;</span><span class="p">,</span>
</span><span class='line'>            <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;&lt;ALPHANUM&gt;&quot;</span>
</span><span class='line'>        <span class="p">},</span>
</span><span class='line'>        <span class="p">{</span>
</span><span class='line'>            <span class="s2">&quot;end_offset&quot;</span><span class="o">:</span> <span class="mi">32</span><span class="p">,</span>
</span><span class='line'>            <span class="s2">&quot;position&quot;</span><span class="o">:</span> <span class="mi">5</span><span class="p">,</span>
</span><span class='line'>            <span class="s2">&quot;start_offset&quot;</span><span class="o">:</span> <span class="mi">27</span><span class="p">,</span>
</span><span class='line'>            <span class="s2">&quot;token&quot;</span><span class="o">:</span> <span class="s2">&quot;which&quot;</span><span class="p">,</span>
</span><span class='line'>            <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;&lt;ALPHANUM&gt;&quot;</span>
</span><span class='line'>        <span class="p">},</span>
</span><span class='line'>        <span class="p">{</span>
</span><span class='line'>            <span class="s2">&quot;end_offset&quot;</span><span class="o">:</span> <span class="mi">35</span><span class="p">,</span>
</span><span class='line'>            <span class="s2">&quot;position&quot;</span><span class="o">:</span> <span class="mi">6</span><span class="p">,</span>
</span><span class='line'>            <span class="s2">&quot;start_offset&quot;</span><span class="o">:</span> <span class="mi">33</span><span class="p">,</span>
</span><span class='line'>            <span class="s2">&quot;token&quot;</span><span class="o">:</span> <span class="s2">&quot;is&quot;</span><span class="p">,</span>
</span><span class='line'>            <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;&lt;ALPHANUM&gt;&quot;</span>
</span><span class='line'>        <span class="p">},</span>
</span><span class='line'>        <span class="p">{</span>
</span><span class='line'>            <span class="s2">&quot;end_offset&quot;</span><span class="o">:</span> <span class="mi">42</span><span class="p">,</span>
</span><span class='line'>            <span class="s2">&quot;position&quot;</span><span class="o">:</span> <span class="mi">7</span><span class="p">,</span>
</span><span class='line'>            <span class="s2">&quot;start_offset&quot;</span><span class="o">:</span> <span class="mi">36</span><span class="p">,</span>
</span><span class='line'>            <span class="s2">&quot;token&quot;</span><span class="o">:</span> <span class="s2">&quot;always&quot;</span><span class="p">,</span>
</span><span class='line'>            <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;&lt;ALPHANUM&gt;&quot;</span>
</span><span class='line'>        <span class="p">},</span>
</span><span class='line'>        <span class="p">{</span>
</span><span class='line'>            <span class="s2">&quot;end_offset&quot;</span><span class="o">:</span> <span class="mi">46</span><span class="p">,</span>
</span><span class='line'>            <span class="s2">&quot;position&quot;</span><span class="o">:</span> <span class="mi">8</span><span class="p">,</span>
</span><span class='line'>            <span class="s2">&quot;start_offset&quot;</span><span class="o">:</span> <span class="mi">43</span><span class="p">,</span>
</span><span class='line'>            <span class="s2">&quot;token&quot;</span><span class="o">:</span> <span class="s2">&quot;fun&quot;</span><span class="p">,</span>
</span><span class='line'>            <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;&lt;ALPHANUM&gt;&quot;</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>    <span class="p">]</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>
<a class="link1">hide</a>
</div>


<ul>
<li>After the tokenization, <strong>token filters</strong> performs further operations on the processed text like converting it to <a href="http://www.elasticsearch.org/guide/reference/index-modules/analysis/lowercase-tokenfilter.html">lowercase</a> or <a href="http://www.elasticsearch.org/guide/reference/index-modules/analysis/reverse-tokenfilter/">reversing</a> of tokens.</li>
</ul>


<p>By default <a href="http://www.elasticsearch.org/guide/reference/index-modules/analysis/standard-tokenfilter/">standard tokenfilter</a> is used which normalizes the tokens. After the application of lowercase tokenfilter.</p>

<p>A processed text like this:</p>

<p><code>Learn</code> <code>Something</code> <code>New</code> <code>Today</code> <code>which</code> <code>is</code> <code>always</code> <code>fun</code></p>

<p>gets broken as</p>

<p><code>learn</code> <code>something</code> <code>new</code> <code>today</code> <code>which</code> <code>is</code> <code>always</code> <code>fun</code></p>

<figure class='code'><figcaption><span>Analyze Api</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>curl -XGET <span class="s1">&#39;localhost:9200/_analyze?tokenizer=standard&amp;filters=lowercase&#39;</span> -d <span class="s1">&#39;Learn Something New Today! which is always fun&#39;</span>
</span></code></pre></td></tr></table></div></figure>


<p><a class="link2" id="show-hide-link-2">show/hide the output</a></p>

<div class="foldable" id="show-hide-block-2">
<figure class='code'><figcaption><span>Analyze Api</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="o">{</span>
</span><span class='line'>    <span class="s2">&quot;tokens&quot;</span>: <span class="o">[</span>
</span><span class='line'>        <span class="o">{</span>
</span><span class='line'>            <span class="s2">&quot;end_offset&quot;</span>: 5,
</span><span class='line'>            <span class="s2">&quot;position&quot;</span>: 1,
</span><span class='line'>            <span class="s2">&quot;start_offset&quot;</span>: 0,
</span><span class='line'>            <span class="s2">&quot;token&quot;</span>: <span class="s2">&quot;learn&quot;</span>,
</span><span class='line'>            <span class="s2">&quot;type&quot;</span>: <span class="s2">&quot;&lt;ALPHANUM&gt;&quot;</span>
</span><span class='line'>        <span class="o">}</span>,
</span><span class='line'>        <span class="o">{</span>
</span><span class='line'>            <span class="s2">&quot;end_offset&quot;</span>: 15,
</span><span class='line'>            <span class="s2">&quot;position&quot;</span>: 2,
</span><span class='line'>            <span class="s2">&quot;start_offset&quot;</span>: 6,
</span><span class='line'>            <span class="s2">&quot;token&quot;</span>: <span class="s2">&quot;something&quot;</span>,
</span><span class='line'>            <span class="s2">&quot;type&quot;</span>: <span class="s2">&quot;&lt;ALPHANUM&gt;&quot;</span>
</span><span class='line'>        <span class="o">}</span>,
</span><span class='line'>        <span class="o">{</span>
</span><span class='line'>            <span class="s2">&quot;end_offset&quot;</span>: 19,
</span><span class='line'>            <span class="s2">&quot;position&quot;</span>: 3,
</span><span class='line'>            <span class="s2">&quot;start_offset&quot;</span>: 16,
</span><span class='line'>            <span class="s2">&quot;token&quot;</span>: <span class="s2">&quot;new&quot;</span>,
</span><span class='line'>            <span class="s2">&quot;type&quot;</span>: <span class="s2">&quot;&lt;ALPHANUM&gt;&quot;</span>
</span><span class='line'>        <span class="o">}</span>,
</span><span class='line'>        <span class="o">{</span>
</span><span class='line'>            <span class="s2">&quot;end_offset&quot;</span>: 25,
</span><span class='line'>            <span class="s2">&quot;position&quot;</span>: 4,
</span><span class='line'>            <span class="s2">&quot;start_offset&quot;</span>: 20,
</span><span class='line'>            <span class="s2">&quot;token&quot;</span>: <span class="s2">&quot;today&quot;</span>,
</span><span class='line'>            <span class="s2">&quot;type&quot;</span>: <span class="s2">&quot;&lt;ALPHANUM&gt;&quot;</span>
</span><span class='line'>        <span class="o">}</span>,
</span><span class='line'>        <span class="o">{</span>
</span><span class='line'>            <span class="s2">&quot;end_offset&quot;</span>: 32,
</span><span class='line'>            <span class="s2">&quot;position&quot;</span>: 5,
</span><span class='line'>            <span class="s2">&quot;start_offset&quot;</span>: 27,
</span><span class='line'>            <span class="s2">&quot;token&quot;</span>: <span class="s2">&quot;which&quot;</span>,
</span><span class='line'>            <span class="s2">&quot;type&quot;</span>: <span class="s2">&quot;&lt;ALPHANUM&gt;&quot;</span>
</span><span class='line'>        <span class="o">}</span>,
</span><span class='line'>        <span class="o">{</span>
</span><span class='line'>            <span class="s2">&quot;end_offset&quot;</span>: 35,
</span><span class='line'>            <span class="s2">&quot;position&quot;</span>: 6,
</span><span class='line'>            <span class="s2">&quot;start_offset&quot;</span>: 33,
</span><span class='line'>            <span class="s2">&quot;token&quot;</span>: <span class="s2">&quot;is&quot;</span>,
</span><span class='line'>            <span class="s2">&quot;type&quot;</span>: <span class="s2">&quot;&lt;ALPHANUM&gt;&quot;</span>
</span><span class='line'>        <span class="o">}</span>,
</span><span class='line'>        <span class="o">{</span>
</span><span class='line'>            <span class="s2">&quot;end_offset&quot;</span>: 42,
</span><span class='line'>            <span class="s2">&quot;position&quot;</span>: 7,
</span><span class='line'>            <span class="s2">&quot;start_offset&quot;</span>: 36,
</span><span class='line'>            <span class="s2">&quot;token&quot;</span>: <span class="s2">&quot;always&quot;</span>,
</span><span class='line'>            <span class="s2">&quot;type&quot;</span>: <span class="s2">&quot;&lt;ALPHANUM&gt;&quot;</span>
</span><span class='line'>        <span class="o">}</span>,
</span><span class='line'>        <span class="o">{</span>
</span><span class='line'>            <span class="s2">&quot;end_offset&quot;</span>: 46,
</span><span class='line'>            <span class="s2">&quot;position&quot;</span>: 8,
</span><span class='line'>            <span class="s2">&quot;start_offset&quot;</span>: 43,
</span><span class='line'>            <span class="s2">&quot;token&quot;</span>: <span class="s2">&quot;fun&quot;</span>,
</span><span class='line'>            <span class="s2">&quot;type&quot;</span>: <span class="s2">&quot;&lt;ALPHANUM&gt;&quot;</span>
</span><span class='line'>        <span class="o">}</span>
</span><span class='line'>    <span class="o">]</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>
<a class="link2">hide</a>
</div>


<p>Thus analyzer is composed of char-filters, tokenizers and tokenfilters. Analyzers defines what kind of search you can preform on your data.</p>

<p>You can have multiple indexes on a field and create your own custom char-filters, tokenizers and tokenfilters. You can have different analyzers for different indexes.</p>

<h2>Let&rsquo;s see it in action</h2>

<p>Example below creates an index with <strong>char-filter</strong> as <code>html_strip</code>, <strong>tokenizer</strong> as <code>standard</code> and tokenfilter i.e, <strong>filter</strong> as <code>lowercase</code> and <code>standard</code></p>

<figure class='code'><figcaption><span>Analyze Api</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>curl -XPUT http://localhost:9200/test -d <span class="s1">&#39;{                                                                                                                   </span>
</span><span class='line'><span class="s1">  &quot;settings&quot;:{</span>
</span><span class='line'><span class="s1">    &quot;analysis&quot;:{</span>
</span><span class='line'><span class="s1">      &quot;analyzer&quot;:{</span>
</span><span class='line'><span class="s1">        &quot;default&quot;:{</span>
</span><span class='line'><span class="s1">          &quot;type&quot;:&quot;custom&quot;,</span>
</span><span class='line'><span class="s1">          &quot;tokenizer&quot;:&quot;standard&quot;,</span>
</span><span class='line'><span class="s1">          &quot;filter&quot;:[ &quot;standard&quot;, &quot;lowercase&quot; ], </span>
</span><span class='line'><span class="s1">          &quot;char_filter&quot; : [&quot;html_strip&quot;]</span>
</span><span class='line'><span class="s1">        }</span>
</span><span class='line'><span class="s1">      }</span>
</span><span class='line'><span class="s1">    }</span>
</span><span class='line'><span class="s1">  }</span>
</span><span class='line'><span class="s1">}&#39;</span>
</span></code></pre></td></tr></table></div></figure>


<p>You can analyze the text using:</p>

<figure class='code'><figcaption><span>Analyze Api</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>curl <span class="s1">&#39;http://localhost:9200/test/_analyze&#39;</span> -d <span class="s1">&#39;&lt;p&gt; Learn Something New Today! which is &lt;b&gt;always&lt;/b&gt; fun &lt;/p&gt;&#39;</span>
</span></code></pre></td></tr></table></div></figure>


<p><a class="link3" id="show-hide-link-3">show/hide the output</a></p>

<div class="foldable" id="show-hide-block-3">
<figure class='code'><figcaption><span>Analyze Api</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="o">{</span>
</span><span class='line'>    <span class="s2">&quot;tokens&quot;</span>: <span class="o">[</span>
</span><span class='line'>        <span class="o">{</span>
</span><span class='line'>            <span class="s2">&quot;end_offset&quot;</span>: 9,
</span><span class='line'>            <span class="s2">&quot;position&quot;</span>: 1,
</span><span class='line'>            <span class="s2">&quot;start_offset&quot;</span>: 4,
</span><span class='line'>            <span class="s2">&quot;token&quot;</span>: <span class="s2">&quot;learn&quot;</span>,
</span><span class='line'>            <span class="s2">&quot;type&quot;</span>: <span class="s2">&quot;&lt;ALPHANUM&gt;&quot;</span>
</span><span class='line'>        <span class="o">}</span>,
</span><span class='line'>        <span class="o">{</span>
</span><span class='line'>            <span class="s2">&quot;end_offset&quot;</span>: 19,
</span><span class='line'>            <span class="s2">&quot;position&quot;</span>: 2,
</span><span class='line'>            <span class="s2">&quot;start_offset&quot;</span>: 10,
</span><span class='line'>            <span class="s2">&quot;token&quot;</span>: <span class="s2">&quot;something&quot;</span>,
</span><span class='line'>            <span class="s2">&quot;type&quot;</span>: <span class="s2">&quot;&lt;ALPHANUM&gt;&quot;</span>
</span><span class='line'>        <span class="o">}</span>,
</span><span class='line'>        <span class="o">{</span>
</span><span class='line'>            <span class="s2">&quot;end_offset&quot;</span>: 23,
</span><span class='line'>            <span class="s2">&quot;position&quot;</span>: 3,
</span><span class='line'>            <span class="s2">&quot;start_offset&quot;</span>: 20,
</span><span class='line'>            <span class="s2">&quot;token&quot;</span>: <span class="s2">&quot;new&quot;</span>,
</span><span class='line'>            <span class="s2">&quot;type&quot;</span>: <span class="s2">&quot;&lt;ALPHANUM&gt;&quot;</span>
</span><span class='line'>        <span class="o">}</span>,
</span><span class='line'>        <span class="o">{</span>
</span><span class='line'>            <span class="s2">&quot;end_offset&quot;</span>: 29,
</span><span class='line'>            <span class="s2">&quot;position&quot;</span>: 4,
</span><span class='line'>            <span class="s2">&quot;start_offset&quot;</span>: 24,
</span><span class='line'>            <span class="s2">&quot;token&quot;</span>: <span class="s2">&quot;today&quot;</span>,
</span><span class='line'>            <span class="s2">&quot;type&quot;</span>: <span class="s2">&quot;&lt;ALPHANUM&gt;&quot;</span>
</span><span class='line'>        <span class="o">}</span>,
</span><span class='line'>        <span class="o">{</span>
</span><span class='line'>            <span class="s2">&quot;end_offset&quot;</span>: 36,
</span><span class='line'>            <span class="s2">&quot;position&quot;</span>: 5,
</span><span class='line'>            <span class="s2">&quot;start_offset&quot;</span>: 31,
</span><span class='line'>            <span class="s2">&quot;token&quot;</span>: <span class="s2">&quot;which&quot;</span>,
</span><span class='line'>            <span class="s2">&quot;type&quot;</span>: <span class="s2">&quot;&lt;ALPHANUM&gt;&quot;</span>
</span><span class='line'>        <span class="o">}</span>,
</span><span class='line'>        <span class="o">{</span>
</span><span class='line'>            <span class="s2">&quot;end_offset&quot;</span>: 39,
</span><span class='line'>            <span class="s2">&quot;position&quot;</span>: 6,
</span><span class='line'>            <span class="s2">&quot;start_offset&quot;</span>: 37,
</span><span class='line'>            <span class="s2">&quot;token&quot;</span>: <span class="s2">&quot;is&quot;</span>,
</span><span class='line'>            <span class="s2">&quot;type&quot;</span>: <span class="s2">&quot;&lt;ALPHANUM&gt;&quot;</span>
</span><span class='line'>        <span class="o">}</span>,
</span><span class='line'>        <span class="o">{</span>
</span><span class='line'>            <span class="s2">&quot;end_offset&quot;</span>: 53,
</span><span class='line'>            <span class="s2">&quot;position&quot;</span>: 7,
</span><span class='line'>            <span class="s2">&quot;start_offset&quot;</span>: 43,
</span><span class='line'>            <span class="s2">&quot;token&quot;</span>: <span class="s2">&quot;always&quot;</span>,
</span><span class='line'>            <span class="s2">&quot;type&quot;</span>: <span class="s2">&quot;&lt;ALPHANUM&gt;&quot;</span>
</span><span class='line'>        <span class="o">}</span>,
</span><span class='line'>        <span class="o">{</span>
</span><span class='line'>            <span class="s2">&quot;end_offset&quot;</span>: 57,
</span><span class='line'>            <span class="s2">&quot;position&quot;</span>: 8,
</span><span class='line'>            <span class="s2">&quot;start_offset&quot;</span>: 54,
</span><span class='line'>            <span class="s2">&quot;token&quot;</span>: <span class="s2">&quot;fun&quot;</span>,
</span><span class='line'>            <span class="s2">&quot;type&quot;</span>: <span class="s2">&quot;&lt;ALPHANUM&gt;&quot;</span>
</span><span class='line'>        <span class="o">}</span>
</span><span class='line'>    <span class="o">]</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>
<a class="link3">hide</a>
</div>


<p>Above results shows that the while creating index it first stripped off the html tags and broke the text into words. And then converted them to lowercase.</p>

<p>Following the same procedure you can analyze different kind of
analyzers. Explore different kind of tokenizers, tokenfilters at <a href="http://www.elasticsearch.org/guide/reference/index-modules/analysis/">http://www.elasticsearch.org/guide/reference/index-modules/analysis/</a></p>

<p>In future posts I will discuss more about how to make custom analyzers and features of elasticsearch like filters and facets.</p>

<script>
$(document).ready(function(){
  $(".foldable").hide();
  $(".link1").click(function(){
     $("#show-hide-block-1").toggle(700);
  });

  $(".link2").click(function(){
     $("#show-hide-block-2").toggle(700);
  });

  $(".link3").click(function(){
     $("#show-hide-block-3").toggle(700);
  });

}); 
</script>

</div>


<div class="meta">
	<div class="date">








  


<time datetime="2013-07-24T14:18:00-05:00" pubdate data-updated="true">Jul 24<span>th</span>, 2013</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/analyzers/'>analyzers</a>, <a class='category' href='/blog/categories/elasticsearch/'>elasticsearch</a>, <a class='category' href='/blog/categories/tutorials/'>tutorials</a>


</div>
	
</div></article>

	<div class="share">
	<div class="addthis_toolbox addthis_default_style ">
	
	<a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
	
	
	<a class="addthis_button_tweet"></a>
	
	
	<a class="addthis_button_google_plusone" g:plusone:size="medium"></a>
	
<!---	<a class="addthis_counter addthis_pill_style"></a> --->
	</div>
  <script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#pubid="></script>
</div>



<nav id="pagenavi">
  <p class="meta">
  
  <a class="prev nohover" id="nohover" href="/blog/2013/07/23/modularize-sinatra/" title="Previous Post: modularize_sinatra - modular sinatra app generator">&laquo; modularize_sinatra - modular sinatra app generator</a>
  
  
  <a class="next nohover" href="/blog/2014/03/15/the-star-in-ruby/" title="Next Post: star in ruby">star in ruby &raquo;</a>
  
  </p>
</nav>

<section id="comment">
    <h2 class="title">Comments</h2>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
</section>


</div>
	<footer id="footer" class="inner">Copyright &copy; 2014

    Ankit Goyal

<br>
Powered by Octopress.
</footer>
	<script src="/javascripts/slash.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script> <!-- Delete or comment this line to disable Fancybox -->


<script type="text/javascript">
      var disqus_shortname = 'goyalankit';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://goyalankit.github.io/blog/2013/07/24/elasticsearch-basics/';
        var disqus_url = 'http://goyalankit.github.io/blog/2013/07/24/elasticsearch-basics/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



	<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-37320558-3']);
		_gaq.push(['_trackPageview']);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	</script>



</body>
</html>
