<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[/home/ankit]]></title>
  <link href="http://goyalankit.github.io/atom.xml" rel="self"/>
  <link href="http://goyalankit.github.io/"/>
  <updated>2014-03-14T01:46:22-05:00</updated>
  <id>http://goyalankit.github.io/</id>
  <author>
    <name><![CDATA[Ankit Goyal]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[elasticsearch basics - Analyzers]]></title>
    <link href="http://goyalankit.github.io/blog/2013/07/24/elasticsearch-basics/"/>
    <updated>2013-07-24T14:18:00-05:00</updated>
    <id>http://goyalankit.github.io/blog/2013/07/24/elasticsearch-basics</id>
    <content type="html"><![CDATA[<p>Elasticsearch is a powerful open source search engine build over Apache
Lucene. You can do all kind of customized searches on huge amount of
data by creating customized indexes. This post gives an overview of
Analysis module of elasticsearch.</p>

<p>Analyzers basically helps you in analyzing your data.<code>:o</code> You need to analyze data while creating indexes and while searching. You could analyze your analyzers using <a href="http://www.elasticsearch.org/guide/reference/api/admin-indices-analyze.html">Analyze Api</a> provided by elasticsearch.</p>

<p>Creating indexes mainly involves three steps:</p>

<ul>
<li><strong>Pre-processing of raw text</strong> using <a href="http://www.elasticsearch.org/guide/reference/index-modules/analysis/mapping-charfilter/">char filters </a>. This may be used to strip html tags, or you may define your custom mapping.  (<em>Couldn&rsquo;t find a way to test this using analyse api. Please put it in comments if you know some way to test these through Analyze Api</em>)</li>
</ul>


<p>Example: You could use a <strong>char-filter</strong> of type <a href="http://www.elasticsearch.org/guide/reference/index-modules/analysis/htmlstrip-charfilter/"><code>html_strip</code></a> to strip out html tags.</p>

<p>A text like this:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;p&gt;</span> Learn Something New Today! which is <span class="nt">&lt;b&gt;</span>always<span class="nt">&lt;/b&gt;</span> fun <span class="nt">&lt;/p&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>would get converted to:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'>Learn Something New Today! which is always fun
</span></code></pre></td></tr></table></div></figure>


<!-- more -->


<ul>
<li><strong>Tokenization of the pre-processed text</strong> using tokenizers. Tokenizers breaks the pre-processed text into tokens. There are different kind of tokenizers available and each of them breaks the text into words differently. By default elasticsearch uses <a href="http://www.elasticsearch.org/guide/reference/index-modules/analysis/standard-tokenizer/">standard tokenizer</a>.</li>
</ul>


<p>standard tokenizer normalizes the data. Note that it removes <code>!</code> from <code>Today!</code></p>

<p>A pre-processed text like this:</p>

<p><code>Learn Something New Today! which is always fun</code></p>

<p>gets broken as</p>

<p><code>Learn</code> <code>Something</code> <code>New</code> <code>Today</code> <code>which</code> <code>is</code> <code>always</code> <code>fun</code></p>

<p>You could check for yourself using Analyze Api mentioned above.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>curl -XGET <span class="s1">&#39;localhost:9200/_analyze?tokenizer=standard&#39;</span> -d <span class="s1">&#39;Learn Something New Today! which is always fun&#39;</span>
</span></code></pre></td></tr></table></div></figure>


<p><a class="link1" id="show-hide-link-1">show/hide the output</a></p>

<div class="foldable" id="show-hide-block-1">
<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="s2">&quot;tokens&quot;</span><span class="o">:</span> <span class="p">[</span>
</span><span class='line'>        <span class="p">{</span>
</span><span class='line'>            <span class="s2">&quot;end_offset&quot;</span><span class="o">:</span> <span class="mi">5</span><span class="p">,</span>
</span><span class='line'>            <span class="s2">&quot;position&quot;</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
</span><span class='line'>            <span class="s2">&quot;start_offset&quot;</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
</span><span class='line'>            <span class="s2">&quot;token&quot;</span><span class="o">:</span> <span class="s2">&quot;Learn&quot;</span><span class="p">,</span>
</span><span class='line'>            <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;&lt;ALPHANUM&gt;&quot;</span>
</span><span class='line'>        <span class="p">},</span>
</span><span class='line'>        <span class="p">{</span>
</span><span class='line'>            <span class="s2">&quot;end_offset&quot;</span><span class="o">:</span> <span class="mi">15</span><span class="p">,</span>
</span><span class='line'>            <span class="s2">&quot;position&quot;</span><span class="o">:</span> <span class="mi">2</span><span class="p">,</span>
</span><span class='line'>            <span class="s2">&quot;start_offset&quot;</span><span class="o">:</span> <span class="mi">6</span><span class="p">,</span>
</span><span class='line'>            <span class="s2">&quot;token&quot;</span><span class="o">:</span> <span class="s2">&quot;Something&quot;</span><span class="p">,</span>
</span><span class='line'>            <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;&lt;ALPHANUM&gt;&quot;</span>
</span><span class='line'>        <span class="p">},</span>
</span><span class='line'>        <span class="p">{</span>
</span><span class='line'>            <span class="s2">&quot;end_offset&quot;</span><span class="o">:</span> <span class="mi">19</span><span class="p">,</span>
</span><span class='line'>            <span class="s2">&quot;position&quot;</span><span class="o">:</span> <span class="mi">3</span><span class="p">,</span>
</span><span class='line'>            <span class="s2">&quot;start_offset&quot;</span><span class="o">:</span> <span class="mi">16</span><span class="p">,</span>
</span><span class='line'>            <span class="s2">&quot;token&quot;</span><span class="o">:</span> <span class="s2">&quot;New&quot;</span><span class="p">,</span>
</span><span class='line'>            <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;&lt;ALPHANUM&gt;&quot;</span>
</span><span class='line'>        <span class="p">},</span>
</span><span class='line'>        <span class="p">{</span>
</span><span class='line'>            <span class="s2">&quot;end_offset&quot;</span><span class="o">:</span> <span class="mi">25</span><span class="p">,</span>
</span><span class='line'>            <span class="s2">&quot;position&quot;</span><span class="o">:</span> <span class="mi">4</span><span class="p">,</span>
</span><span class='line'>            <span class="s2">&quot;start_offset&quot;</span><span class="o">:</span> <span class="mi">20</span><span class="p">,</span>
</span><span class='line'>            <span class="s2">&quot;token&quot;</span><span class="o">:</span> <span class="s2">&quot;Today&quot;</span><span class="p">,</span>
</span><span class='line'>            <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;&lt;ALPHANUM&gt;&quot;</span>
</span><span class='line'>        <span class="p">},</span>
</span><span class='line'>        <span class="p">{</span>
</span><span class='line'>            <span class="s2">&quot;end_offset&quot;</span><span class="o">:</span> <span class="mi">32</span><span class="p">,</span>
</span><span class='line'>            <span class="s2">&quot;position&quot;</span><span class="o">:</span> <span class="mi">5</span><span class="p">,</span>
</span><span class='line'>            <span class="s2">&quot;start_offset&quot;</span><span class="o">:</span> <span class="mi">27</span><span class="p">,</span>
</span><span class='line'>            <span class="s2">&quot;token&quot;</span><span class="o">:</span> <span class="s2">&quot;which&quot;</span><span class="p">,</span>
</span><span class='line'>            <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;&lt;ALPHANUM&gt;&quot;</span>
</span><span class='line'>        <span class="p">},</span>
</span><span class='line'>        <span class="p">{</span>
</span><span class='line'>            <span class="s2">&quot;end_offset&quot;</span><span class="o">:</span> <span class="mi">35</span><span class="p">,</span>
</span><span class='line'>            <span class="s2">&quot;position&quot;</span><span class="o">:</span> <span class="mi">6</span><span class="p">,</span>
</span><span class='line'>            <span class="s2">&quot;start_offset&quot;</span><span class="o">:</span> <span class="mi">33</span><span class="p">,</span>
</span><span class='line'>            <span class="s2">&quot;token&quot;</span><span class="o">:</span> <span class="s2">&quot;is&quot;</span><span class="p">,</span>
</span><span class='line'>            <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;&lt;ALPHANUM&gt;&quot;</span>
</span><span class='line'>        <span class="p">},</span>
</span><span class='line'>        <span class="p">{</span>
</span><span class='line'>            <span class="s2">&quot;end_offset&quot;</span><span class="o">:</span> <span class="mi">42</span><span class="p">,</span>
</span><span class='line'>            <span class="s2">&quot;position&quot;</span><span class="o">:</span> <span class="mi">7</span><span class="p">,</span>
</span><span class='line'>            <span class="s2">&quot;start_offset&quot;</span><span class="o">:</span> <span class="mi">36</span><span class="p">,</span>
</span><span class='line'>            <span class="s2">&quot;token&quot;</span><span class="o">:</span> <span class="s2">&quot;always&quot;</span><span class="p">,</span>
</span><span class='line'>            <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;&lt;ALPHANUM&gt;&quot;</span>
</span><span class='line'>        <span class="p">},</span>
</span><span class='line'>        <span class="p">{</span>
</span><span class='line'>            <span class="s2">&quot;end_offset&quot;</span><span class="o">:</span> <span class="mi">46</span><span class="p">,</span>
</span><span class='line'>            <span class="s2">&quot;position&quot;</span><span class="o">:</span> <span class="mi">8</span><span class="p">,</span>
</span><span class='line'>            <span class="s2">&quot;start_offset&quot;</span><span class="o">:</span> <span class="mi">43</span><span class="p">,</span>
</span><span class='line'>            <span class="s2">&quot;token&quot;</span><span class="o">:</span> <span class="s2">&quot;fun&quot;</span><span class="p">,</span>
</span><span class='line'>            <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;&lt;ALPHANUM&gt;&quot;</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>    <span class="p">]</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>
<a class="link1">hide</a>
</div>


<ul>
<li>After the tokenization, <strong>token filters</strong> performs further operations on the processed text like converting it to <a href="http://www.elasticsearch.org/guide/reference/index-modules/analysis/lowercase-tokenfilter.html">lowercase</a> or <a href="http://www.elasticsearch.org/guide/reference/index-modules/analysis/reverse-tokenfilter/">reversing</a> of tokens.</li>
</ul>


<p>By default <a href="http://www.elasticsearch.org/guide/reference/index-modules/analysis/standard-tokenfilter/">standard tokenfilter</a> is used which normalizes the tokens. After the application of lowercase tokenfilter.</p>

<p>A processed text like this:</p>

<p><code>Learn</code> <code>Something</code> <code>New</code> <code>Today</code> <code>which</code> <code>is</code> <code>always</code> <code>fun</code></p>

<p>gets broken as</p>

<p><code>learn</code> <code>something</code> <code>new</code> <code>today</code> <code>which</code> <code>is</code> <code>always</code> <code>fun</code></p>

<figure class='code'><figcaption><span>Analyze Api</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>curl -XGET <span class="s1">&#39;localhost:9200/_analyze?tokenizer=standard&amp;filters=lowercase&#39;</span> -d <span class="s1">&#39;Learn Something New Today! which is always fun&#39;</span>
</span></code></pre></td></tr></table></div></figure>


<p><a class="link2" id="show-hide-link-2">show/hide the output</a></p>

<div class="foldable" id="show-hide-block-2">
<figure class='code'><figcaption><span>Analyze Api</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="o">{</span>
</span><span class='line'>    <span class="s2">&quot;tokens&quot;</span>: <span class="o">[</span>
</span><span class='line'>        <span class="o">{</span>
</span><span class='line'>            <span class="s2">&quot;end_offset&quot;</span>: 5,
</span><span class='line'>            <span class="s2">&quot;position&quot;</span>: 1,
</span><span class='line'>            <span class="s2">&quot;start_offset&quot;</span>: 0,
</span><span class='line'>            <span class="s2">&quot;token&quot;</span>: <span class="s2">&quot;learn&quot;</span>,
</span><span class='line'>            <span class="s2">&quot;type&quot;</span>: <span class="s2">&quot;&lt;ALPHANUM&gt;&quot;</span>
</span><span class='line'>        <span class="o">}</span>,
</span><span class='line'>        <span class="o">{</span>
</span><span class='line'>            <span class="s2">&quot;end_offset&quot;</span>: 15,
</span><span class='line'>            <span class="s2">&quot;position&quot;</span>: 2,
</span><span class='line'>            <span class="s2">&quot;start_offset&quot;</span>: 6,
</span><span class='line'>            <span class="s2">&quot;token&quot;</span>: <span class="s2">&quot;something&quot;</span>,
</span><span class='line'>            <span class="s2">&quot;type&quot;</span>: <span class="s2">&quot;&lt;ALPHANUM&gt;&quot;</span>
</span><span class='line'>        <span class="o">}</span>,
</span><span class='line'>        <span class="o">{</span>
</span><span class='line'>            <span class="s2">&quot;end_offset&quot;</span>: 19,
</span><span class='line'>            <span class="s2">&quot;position&quot;</span>: 3,
</span><span class='line'>            <span class="s2">&quot;start_offset&quot;</span>: 16,
</span><span class='line'>            <span class="s2">&quot;token&quot;</span>: <span class="s2">&quot;new&quot;</span>,
</span><span class='line'>            <span class="s2">&quot;type&quot;</span>: <span class="s2">&quot;&lt;ALPHANUM&gt;&quot;</span>
</span><span class='line'>        <span class="o">}</span>,
</span><span class='line'>        <span class="o">{</span>
</span><span class='line'>            <span class="s2">&quot;end_offset&quot;</span>: 25,
</span><span class='line'>            <span class="s2">&quot;position&quot;</span>: 4,
</span><span class='line'>            <span class="s2">&quot;start_offset&quot;</span>: 20,
</span><span class='line'>            <span class="s2">&quot;token&quot;</span>: <span class="s2">&quot;today&quot;</span>,
</span><span class='line'>            <span class="s2">&quot;type&quot;</span>: <span class="s2">&quot;&lt;ALPHANUM&gt;&quot;</span>
</span><span class='line'>        <span class="o">}</span>,
</span><span class='line'>        <span class="o">{</span>
</span><span class='line'>            <span class="s2">&quot;end_offset&quot;</span>: 32,
</span><span class='line'>            <span class="s2">&quot;position&quot;</span>: 5,
</span><span class='line'>            <span class="s2">&quot;start_offset&quot;</span>: 27,
</span><span class='line'>            <span class="s2">&quot;token&quot;</span>: <span class="s2">&quot;which&quot;</span>,
</span><span class='line'>            <span class="s2">&quot;type&quot;</span>: <span class="s2">&quot;&lt;ALPHANUM&gt;&quot;</span>
</span><span class='line'>        <span class="o">}</span>,
</span><span class='line'>        <span class="o">{</span>
</span><span class='line'>            <span class="s2">&quot;end_offset&quot;</span>: 35,
</span><span class='line'>            <span class="s2">&quot;position&quot;</span>: 6,
</span><span class='line'>            <span class="s2">&quot;start_offset&quot;</span>: 33,
</span><span class='line'>            <span class="s2">&quot;token&quot;</span>: <span class="s2">&quot;is&quot;</span>,
</span><span class='line'>            <span class="s2">&quot;type&quot;</span>: <span class="s2">&quot;&lt;ALPHANUM&gt;&quot;</span>
</span><span class='line'>        <span class="o">}</span>,
</span><span class='line'>        <span class="o">{</span>
</span><span class='line'>            <span class="s2">&quot;end_offset&quot;</span>: 42,
</span><span class='line'>            <span class="s2">&quot;position&quot;</span>: 7,
</span><span class='line'>            <span class="s2">&quot;start_offset&quot;</span>: 36,
</span><span class='line'>            <span class="s2">&quot;token&quot;</span>: <span class="s2">&quot;always&quot;</span>,
</span><span class='line'>            <span class="s2">&quot;type&quot;</span>: <span class="s2">&quot;&lt;ALPHANUM&gt;&quot;</span>
</span><span class='line'>        <span class="o">}</span>,
</span><span class='line'>        <span class="o">{</span>
</span><span class='line'>            <span class="s2">&quot;end_offset&quot;</span>: 46,
</span><span class='line'>            <span class="s2">&quot;position&quot;</span>: 8,
</span><span class='line'>            <span class="s2">&quot;start_offset&quot;</span>: 43,
</span><span class='line'>            <span class="s2">&quot;token&quot;</span>: <span class="s2">&quot;fun&quot;</span>,
</span><span class='line'>            <span class="s2">&quot;type&quot;</span>: <span class="s2">&quot;&lt;ALPHANUM&gt;&quot;</span>
</span><span class='line'>        <span class="o">}</span>
</span><span class='line'>    <span class="o">]</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>
<a class="link2">hide</a>
</div>


<p>Thus analyzer is composed of char-filters, tokenizers and tokenfilters. Analyzers defines what kind of search you can preform on your data.</p>

<p>You can have multiple indexes on a field and create your own custom char-filters, tokenizers and tokenfilters. You can have different analyzers for different indexes.</p>

<h2>Let&rsquo;s see it in action</h2>

<p>Example below creates an index with <strong>char-filter</strong> as <code>html_strip</code>, <strong>tokenizer</strong> as <code>standard</code> and tokenfilter i.e, <strong>filter</strong> as <code>lowercase</code> and <code>standard</code></p>

<figure class='code'><figcaption><span>Analyze Api</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>curl -XPUT http://localhost:9200/test -d <span class="s1">&#39;{                                                                                                                   </span>
</span><span class='line'><span class="s1">  &quot;settings&quot;:{</span>
</span><span class='line'><span class="s1">    &quot;analysis&quot;:{</span>
</span><span class='line'><span class="s1">      &quot;analyzer&quot;:{</span>
</span><span class='line'><span class="s1">        &quot;default&quot;:{</span>
</span><span class='line'><span class="s1">          &quot;type&quot;:&quot;custom&quot;,</span>
</span><span class='line'><span class="s1">          &quot;tokenizer&quot;:&quot;standard&quot;,</span>
</span><span class='line'><span class="s1">          &quot;filter&quot;:[ &quot;standard&quot;, &quot;lowercase&quot; ], </span>
</span><span class='line'><span class="s1">          &quot;char_filter&quot; : [&quot;html_strip&quot;]</span>
</span><span class='line'><span class="s1">        }</span>
</span><span class='line'><span class="s1">      }</span>
</span><span class='line'><span class="s1">    }</span>
</span><span class='line'><span class="s1">  }</span>
</span><span class='line'><span class="s1">}&#39;</span>
</span></code></pre></td></tr></table></div></figure>


<p>You can analyze the text using:</p>

<figure class='code'><figcaption><span>Analyze Api</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>curl <span class="s1">&#39;http://localhost:9200/test/_analyze&#39;</span> -d <span class="s1">&#39;&lt;p&gt; Learn Something New Today! which is &lt;b&gt;always&lt;/b&gt; fun &lt;/p&gt;&#39;</span>
</span></code></pre></td></tr></table></div></figure>


<p><a class="link3" id="show-hide-link-3">show/hide the output</a></p>

<div class="foldable" id="show-hide-block-3">
<figure class='code'><figcaption><span>Analyze Api</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="o">{</span>
</span><span class='line'>    <span class="s2">&quot;tokens&quot;</span>: <span class="o">[</span>
</span><span class='line'>        <span class="o">{</span>
</span><span class='line'>            <span class="s2">&quot;end_offset&quot;</span>: 9,
</span><span class='line'>            <span class="s2">&quot;position&quot;</span>: 1,
</span><span class='line'>            <span class="s2">&quot;start_offset&quot;</span>: 4,
</span><span class='line'>            <span class="s2">&quot;token&quot;</span>: <span class="s2">&quot;learn&quot;</span>,
</span><span class='line'>            <span class="s2">&quot;type&quot;</span>: <span class="s2">&quot;&lt;ALPHANUM&gt;&quot;</span>
</span><span class='line'>        <span class="o">}</span>,
</span><span class='line'>        <span class="o">{</span>
</span><span class='line'>            <span class="s2">&quot;end_offset&quot;</span>: 19,
</span><span class='line'>            <span class="s2">&quot;position&quot;</span>: 2,
</span><span class='line'>            <span class="s2">&quot;start_offset&quot;</span>: 10,
</span><span class='line'>            <span class="s2">&quot;token&quot;</span>: <span class="s2">&quot;something&quot;</span>,
</span><span class='line'>            <span class="s2">&quot;type&quot;</span>: <span class="s2">&quot;&lt;ALPHANUM&gt;&quot;</span>
</span><span class='line'>        <span class="o">}</span>,
</span><span class='line'>        <span class="o">{</span>
</span><span class='line'>            <span class="s2">&quot;end_offset&quot;</span>: 23,
</span><span class='line'>            <span class="s2">&quot;position&quot;</span>: 3,
</span><span class='line'>            <span class="s2">&quot;start_offset&quot;</span>: 20,
</span><span class='line'>            <span class="s2">&quot;token&quot;</span>: <span class="s2">&quot;new&quot;</span>,
</span><span class='line'>            <span class="s2">&quot;type&quot;</span>: <span class="s2">&quot;&lt;ALPHANUM&gt;&quot;</span>
</span><span class='line'>        <span class="o">}</span>,
</span><span class='line'>        <span class="o">{</span>
</span><span class='line'>            <span class="s2">&quot;end_offset&quot;</span>: 29,
</span><span class='line'>            <span class="s2">&quot;position&quot;</span>: 4,
</span><span class='line'>            <span class="s2">&quot;start_offset&quot;</span>: 24,
</span><span class='line'>            <span class="s2">&quot;token&quot;</span>: <span class="s2">&quot;today&quot;</span>,
</span><span class='line'>            <span class="s2">&quot;type&quot;</span>: <span class="s2">&quot;&lt;ALPHANUM&gt;&quot;</span>
</span><span class='line'>        <span class="o">}</span>,
</span><span class='line'>        <span class="o">{</span>
</span><span class='line'>            <span class="s2">&quot;end_offset&quot;</span>: 36,
</span><span class='line'>            <span class="s2">&quot;position&quot;</span>: 5,
</span><span class='line'>            <span class="s2">&quot;start_offset&quot;</span>: 31,
</span><span class='line'>            <span class="s2">&quot;token&quot;</span>: <span class="s2">&quot;which&quot;</span>,
</span><span class='line'>            <span class="s2">&quot;type&quot;</span>: <span class="s2">&quot;&lt;ALPHANUM&gt;&quot;</span>
</span><span class='line'>        <span class="o">}</span>,
</span><span class='line'>        <span class="o">{</span>
</span><span class='line'>            <span class="s2">&quot;end_offset&quot;</span>: 39,
</span><span class='line'>            <span class="s2">&quot;position&quot;</span>: 6,
</span><span class='line'>            <span class="s2">&quot;start_offset&quot;</span>: 37,
</span><span class='line'>            <span class="s2">&quot;token&quot;</span>: <span class="s2">&quot;is&quot;</span>,
</span><span class='line'>            <span class="s2">&quot;type&quot;</span>: <span class="s2">&quot;&lt;ALPHANUM&gt;&quot;</span>
</span><span class='line'>        <span class="o">}</span>,
</span><span class='line'>        <span class="o">{</span>
</span><span class='line'>            <span class="s2">&quot;end_offset&quot;</span>: 53,
</span><span class='line'>            <span class="s2">&quot;position&quot;</span>: 7,
</span><span class='line'>            <span class="s2">&quot;start_offset&quot;</span>: 43,
</span><span class='line'>            <span class="s2">&quot;token&quot;</span>: <span class="s2">&quot;always&quot;</span>,
</span><span class='line'>            <span class="s2">&quot;type&quot;</span>: <span class="s2">&quot;&lt;ALPHANUM&gt;&quot;</span>
</span><span class='line'>        <span class="o">}</span>,
</span><span class='line'>        <span class="o">{</span>
</span><span class='line'>            <span class="s2">&quot;end_offset&quot;</span>: 57,
</span><span class='line'>            <span class="s2">&quot;position&quot;</span>: 8,
</span><span class='line'>            <span class="s2">&quot;start_offset&quot;</span>: 54,
</span><span class='line'>            <span class="s2">&quot;token&quot;</span>: <span class="s2">&quot;fun&quot;</span>,
</span><span class='line'>            <span class="s2">&quot;type&quot;</span>: <span class="s2">&quot;&lt;ALPHANUM&gt;&quot;</span>
</span><span class='line'>        <span class="o">}</span>
</span><span class='line'>    <span class="o">]</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>
<a class="link3">hide</a>
</div>


<p>Above results shows that the while creating index it first stripped off the html tags and broke the text into words. And then converted them to lowercase.</p>

<p>Following the same procedure you can analyze different kind of
analyzers. Explore different kind of tokenizers, tokenfilters at <a href="http://www.elasticsearch.org/guide/reference/index-modules/analysis/">http://www.elasticsearch.org/guide/reference/index-modules/analysis/</a></p>

<p>In future posts I will discuss more about how to make custom analyzers and features of elasticsearch like filters and facets.</p>

<script>
$(document).ready(function(){
  $(".foldable").hide();
  $(".link1").click(function(){
     $("#show-hide-block-1").toggle(700);
  });

  $(".link2").click(function(){
     $("#show-hide-block-2").toggle(700);
  });

  $(".link3").click(function(){
     $("#show-hide-block-3").toggle(700);
  });

}); 
</script>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[modularize_sinatra - modular sinatra app generator]]></title>
    <link href="http://goyalankit.github.io/blog/2013/07/23/modularize-sinatra/"/>
    <updated>2013-07-23T21:41:00-05:00</updated>
    <id>http://goyalankit.github.io/blog/2013/07/23/modularize-sinatra</id>
    <content type="html"><![CDATA[<p><a href="http://github.com/sinatra/sinatra"><strong>Sinatra</strong></a> is simple, small and fast.</p>

<blockquote><p>Sinatra is a DSL for quickly creating web applications in Ruby with minimal effort. <strong> &ndash; sinatra readme</strong></p></blockquote>

<p>The only downside is that it doesn&rsquo;t offer you the typical <a href="http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller">&ldquo;MVC&rdquo;</a> like <a href="http://github.com/rails/rails"><strong>Rails</strong></a>.</p>

<p>Lot of times Rails is an overkill for a simple application and Sinatra seems like a perfect choice. Since using Sinatra, you could write all your code in a single file, and at one time it becomes really hard to manage the code and you may feel the need of porting it to a framework like Rails. However, you don&rsquo;t need all the features that comes with Rails. What you need here is some kind of modularization in your application. For this very purpose I created a gem called <a href="http://github.com/goyalankit/modularize_sinatra">modularize_sinatra</a></p>

<blockquote><p><strong>modularize_sinatra</strong> creates a <em>Rails like</em> MVC structure without the overhead.</p></blockquote>

<p><a href="https://rubygems.org/gems/modularize_sinatra"><code>modularize_sinatra</code></a> is available on rubygems. For installation and usage instructions please visit <a href="http://github.com/goyalankit/modularize_sinatra">http://github.com/goyalankit/modularize_sinatra</a></p>

<!-- more -->


<h3>What does it do?</h3>

<p>It generates the following directory structure, when generated using <code>modularize_sinatra myapp -C user</code></p>

<pre><code>  .
  |-- Gemfile
  |-- Rakefile
  |-- config
  |   `-- environment.rb
  |-- config.ru
  |-- lib
  |   |-- app.rb
  |   |-- controllers
  |   |   `-- user.rb
  |   `-- views
  |       `-- users
  |           `-- index.erb
  |-- myapp.rb
  |-- public
  |-- script
  |-- spec
  |   |-- controllers
  |   |   `-- user_spec.rb
  |   |-- spec_helper.rb
  |   `-- support
  `-- tmp
</code></pre>

<p>It generated some usual ruby files like</p>

<ul>
<li><strong>Gemfile</strong> &ndash;  A format for describing gem dependencies for Ruby programs.</li>
<li><strong>Rakefile</strong> &ndash; Contains task to run specs.</li>
<li><strong>config.ru</strong> &ndash; Rack configuration file.</li>
<li><strong>config/environment.rb</strong> &ndash; Here you could load your configuration files. <em>Hint: Could load configuration given in .yml files</em></li>
<li><strong>lib</strong> contains directories for placing your controllers and views.</li>
<li><strong>myapp.rb</strong> loads all ruby files inside <code>lib</code>, <code>lib/controllers</code> and <code>lib/models</code>.</li>
</ul>


<p>Note the <strong>lib/models</strong> in above point. You could create a directory called <code>models</code> in lib directory to place your models and it will also be loaded.</p>

<ul>
<li><strong>public</strong> &ndash; To serve public assets.</li>
<li><strong>script</strong> &ndash; You could get rid of this directory. This is just a container to put your scripts.</li>
<li><strong>spec</strong> &ndash; Place your specifications inside this. modularize_sinatra integrates rspec for you by default.</li>
</ul>


<p>Please contribute at <a href="http://github.com/goyalankit/modularize_sinatra">http://github.com/goyalankit/modularize_sinatra</a></p>

<p>Comments and suggestions are most welcome.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Initial commit]]></title>
    <link href="http://goyalankit.github.io/blog/2013/07/23/initial-commit/"/>
    <updated>2013-07-23T15:23:00-05:00</updated>
    <id>http://goyalankit.github.io/blog/2013/07/23/initial-commit</id>
    <content type="html"><![CDATA[<p><img src="http://25.media.tumblr.com/9bf68d40dd695984b5331280dfe2cb99/tumblr_mft9ey6vlg1rzwhuvo1_400.png"></p>

<p>This is my first post. Through this blog, I hope to share technical, non-technical, all kind of stuff that I discover and/or create.</p>
]]></content>
  </entry>
  
</feed>
